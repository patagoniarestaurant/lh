<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patagonia Restaurant — Menú Digital</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg: #0a0a0a;
            --surface: #141414;
            --surface-light: #1e1e1e;
            --text: #ffffff;
            --text-muted: #a0a0a0;
            --accent: #d4af37;
            --accent-dark: #b8941f;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --border: rgba(255,255,255,0.08);
            --radius: 12px;
            --shadow: 0 10px 25px rgba(0,0,0,0.5);
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html, body {
            height: 100%;
            scroll-behavior: smooth;
        }

        body {
            background: var(--bg);
            color: var(--text);
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            position: sticky;
            top: 0;
            z-index: 100;
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border);
            padding: 16px 0;
            transition: var(--transition);
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .brand img {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 50%;
            border: 2px solid var(--accent);
        }

        .brand-text h1 {
            font-family: 'Playfair Display', serif;
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .brand-text .slogan {
            font-size: 14px;
            color: var(--text-muted);
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        /* Hamburger Menu */
        .hamburger-menu {
            display: none;
            flex-direction: column;
            gap: 4px;
            cursor: pointer;
            padding: 8px;
        }

        .hamburger-menu span {
            width: 25px;
            height: 3px;
            background: var(--text);
            transition: var(--transition);
        }

        .hamburger-menu.active span:nth-child(1) {
            transform: rotate(45deg) translate(6px, 6px);
        }

        .hamburger-menu.active span:nth-child(2) {
            opacity: 0;
        }

        .hamburger-menu.active span:nth-child(3) {
            transform: rotate(-45deg) translate(6px, -6px);
        }

        /* Sidebar Navigation */
        .sidebar-nav {
            position: fixed;
            top: 0;
            left: -300px;
            width: 300px;
            height: 100vh;
            background: var(--surface);
            z-index: 1000;
            transition: var(--transition);
            overflow-y: auto;
            padding: 20px;
            border-right: 1px solid var(--border);
        }

        .sidebar-nav.open {
            left: 0;
        }

        .sidebar-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .sidebar-overlay.open {
            opacity: 1;
            visibility: visible;
        }

        .sidebar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border);
        }

        .sidebar-title {
            font-family: 'Playfair Display', serif;
            font-size: 20px;
            font-weight: 600;
            color: var(--accent);
        }

        .close-sidebar {
            background: transparent;
            border: none;
            color: var(--text);
            font-size: 20px;
            cursor: pointer;
        }

        .categories-sidebar {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .category-sidebar-btn {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-muted);
            padding: 12px 16px;
            border-radius: var(--radius);
            font-size: 14px;
            font-weight: 500;
            text-align: left;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .category-sidebar-btn:hover, .category-sidebar-btn.active {
            background: var(--accent);
            color: var(--bg);
            border-color: var(--accent);
        }

        .category-sidebar-btn i {
            width: 20px;
            text-align: center;
        }

        /* Search Box */
        .search-container {
            margin: 20px 0;
        }

        .search-box {
            position: relative;
            display: flex;
            align-items: center;
        }

        .search-box input {
            background: var(--surface-light);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 12px 16px 12px 45px;
            color: var(--text);
            font-size: 14px;
            width: 100%;
            transition: var(--transition);
        }

        .search-box input:focus {
            outline: none;
            border-color: var(--accent);
        }

        .search-icon {
            position: absolute;
            left: 16px;
            color: var(--text-muted);
        }

        /* Main Layout */
        main {
            display: grid;
            grid-template-columns: 1fr;
            gap: 24px;
            padding: 24px 0;
        }

        /* Menu Section */
        .menu-section {
            display: grid;
            gap: 24px;
        }

        .category-section {
            background: var(--surface);
            border-radius: var(--radius);
            padding: 24px;
            box-shadow: var(--shadow);
        }

        .category-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
        }

        .category-title {
            font-family: 'Playfair Display', serif;
            font-size: 24px;
            font-weight: 600;
            color: var(--accent);
        }

        .category-count {
            background: var(--surface-light);
            color: var(--text-muted);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 14px;
        }

        .dishes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        /* Dish Card */
        .dish-card {
            background: var(--surface-light);
            border-radius: var(--radius);
            overflow: hidden;
            transition: var(--transition);
            border: 1px solid var(--border);
        }

        .dish-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow);
            border-color: var(--accent);
        }

        .dish-image {
            position: relative;
            width: 100%;
            height: 180px;
            overflow: hidden;
        }

        .dish-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: var(--transition);
        }

        .dish-card:hover .dish-image img {
            transform: scale(1.05);
        }

        .dish-badges {
            position: absolute;
            top: 12px;
            right: 12px;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .dish-badge {
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .dish-badge.veg {
            background: var(--success);
        }

        .dish-badge.spicy {
            background: var(--warning);
        }

        .dish-badge.gluten-free {
            background: var(--accent);
        }

        .favorite-btn {
            position: absolute;
            top: 12px;
            left: 12px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: none;
            cursor: pointer;
            transition: var(--transition);
        }

        .favorite-btn:hover, .favorite-btn.active {
            background: var(--error);
            color: white;
        }

        .dish-content {
            padding: 16px;
        }

        .dish-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 8px;
        }

        .dish-name {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .dish-price {
            font-size: 18px;
            font-weight: 700;
            color: var(--accent);
            white-space: nowrap;
        }

        .dish-description {
            color: var(--text-muted);
            font-size: 14px;
            margin-bottom: 16px;
            line-height: 1.5;
        }

        .dish-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .qty-btn {
            background: var(--surface);
            border: 1px solid var(--border);
            color: var(--text);
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .qty-btn:hover {
            background: var(--accent);
            color: var(--bg);
            border-color: var(--accent);
        }

        .qty-display {
            min-width: 30px;
            text-align: center;
            font-weight: 600;
        }

        .add-to-cart-btn {
            background: var(--accent);
            color: var(--bg);
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .add-to-cart-btn:hover {
            background: var(--accent-dark);
            transform: translateY(-2px);
        }

        /* Sidebar */
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        .info-card, .cart-card {
            background: var(--surface);
            border-radius: var(--radius);
            padding: 24px;
            box-shadow: var(--shadow);
        }

        .card-title {
            font-family: 'Playfair Display', serif;
            font-size: 20px;
            font-weight: 600;
            color: var(--accent);
            margin-bottom: 16px;
        }

        .info-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .info-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .info-icon {
            color: var(--accent);
            width: 20px;
            text-align: center;
        }

        .info-text {
            flex: 1;
            font-size: 14px;
        }

        .info-text strong {
            color: var(--text);
        }

        .social-links {
            display: flex;
            gap: 12px;
            margin-top: 16px;
        }

        .social-link {
            background: var(--surface-light);
            color: var(--text);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .social-link:hover {
            background: var(--accent);
            color: var(--bg);
            transform: translateY(-2px);
        }

        /* Cart */
        .cart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .cart-items {
            max-height: 400px;
            overflow-y: auto;
            margin-bottom: 16px;
        }

        .cart-item {
            display: flex;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
        }

        .cart-item:last-child {
            border-bottom: none;
        }

        .cart-item-image {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            object-fit: cover;
        }

        .cart-item-details {
            flex: 1;
        }

        .cart-item-name {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .cart-item-price {
            color: var(--accent);
            font-weight: 600;
        }

        .cart-item-actions {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .cart-footer {
            border-top: 1px solid var(--border);
            padding-top: 16px;
        }

        .cart-total {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            font-weight: 600;
            font-size: 18px;
        }

        .checkout-btn {
            background: var(--accent);
            color: var(--bg);
            border: none;
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .checkout-btn:hover {
            background: var(--accent-dark);
            transform: translateY(-2px);
        }

        .checkout-btn:disabled {
            background: var(--text-muted);
            cursor: not-allowed;
            transform: none;
        }

        /* Payment Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .modal.open {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: var(--surface);
            border-radius: var(--radius);
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 24px;
            box-shadow: var(--shadow);
            transform: translateY(20px);
            transition: var(--transition);
        }

        .modal.open .modal-content {
            transform: translateY(0);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-family: 'Playfair Display', serif;
            font-size: 24px;
            font-weight: 600;
            color: var(--accent);
        }

        .close-modal {
            background: transparent;
            border: none;
            color: var(--text);
            font-size: 20px;
            cursor: pointer;
        }

        .payment-options {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin: 20px 0;
        }

        .payment-option {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            border: 1px solid var(--border);
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
        }

        .payment-option:hover {
            border-color: var(--accent);
        }

        .payment-option.selected {
            border-color: var(--accent);
            background: rgba(212, 175, 55, 0.1);
        }

        .payment-icon {
            font-size: 24px;
            color: var(--accent);
        }

        .payment-info h4 {
            margin-bottom: 4px;
        }

        .payment-info p {
            font-size: 14px;
            color: var(--text-muted);
        }

        .tip-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            margin: 16px 0;
        }

        .tip-option {
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .tip-option:hover {
            border-color: var(--accent);
        }

        .tip-option.selected {
            border-color: var(--accent);
            background: rgba(212, 175, 55, 0.1);
        }

        .receipt {
            background: var(--surface-light);
            border-radius: 8px;
            padding: 16px;
            margin: 20px 0;
        }

        .receipt-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .receipt-total {
            display: flex;
            justify-content: space-between;
            font-weight: 600;
            font-size: 18px;
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid var(--border);
        }

        /* Admin Panel Styles */
        .admin-panel {
            position: fixed;
            top: 0;
            right: -400px;
            width: 400px;
            height: 100vh;
            background: var(--surface);
            border-left: 1px solid var(--border);
            z-index: 2000;
            transition: var(--transition);
            overflow-y: auto;
            padding: 20px;
        }

        .admin-panel.open {
            right: 0;
        }

        .admin-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1999;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .admin-overlay.open {
            opacity: 1;
            visibility: visible;
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border);
        }

        .admin-title {
            font-family: 'Playfair Display', serif;
            font-size: 24px;
            font-weight: 600;
            color: var(--accent);
        }

        .admin-close {
            background: transparent;
            border: none;
            color: var(--text);
            font-size: 20px;
            cursor: pointer;
        }

        .admin-section {
            margin-bottom: 24px;
        }

        .admin-section-title {
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--text);
            font-size: 18px;
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: var(--text);
        }

        .form-input, .form-select, .form-textarea {
            width: 100%;
            background: var(--surface-light);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 10px 12px;
            color: var(--text);
            font-family: 'Inter', sans-serif;
            transition: var(--transition);
        }

        .form-input:focus, .form-select:focus, .form-textarea:focus {
            outline: none;
            border-color: var(--accent);
        }

        .form-textarea {
            min-height: 80px;
            resize: vertical;
        }

        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-top: 8px;
        }

        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 14px;
            cursor: pointer;
        }

        .checkbox-label input {
            margin: 0;
        }

        .image-upload {
            border: 2px dashed var(--border);
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .image-upload:hover {
            border-color: var(--accent);
        }

        .image-upload i {
            font-size: 32px;
            margin-bottom: 8px;
            color: var(--text-muted);
        }

        .image-preview {
            width: 100%;
            height: 150px;
            border-radius: 8px;
            overflow: hidden;
            margin-top: 12px;
        }

        .image-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .admin-actions {
            display: flex;
            gap: 12px;
            margin-top: 24px;
        }

        .admin-btn {
            flex: 1;
            padding: 12px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            border: none;
        }

        .admin-btn.primary {
            background: var(--accent);
            color: var(--bg);
        }

        .admin-btn.primary:hover {
            background: var(--accent-dark);
        }

        .admin-btn.secondary {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text);
        }

        .admin-btn.secondary:hover {
            background: var(--surface-light);
        }

        .admin-btn.danger {
            background: var(--error);
            color: white;
        }

        .admin-btn.danger:hover {
            background: #dc2626;
        }

        .items-list {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid var(--border);
            border-radius: 8px;
        }

        .item-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            border-bottom: 1px solid var(--border);
        }

        .item-row:last-child {
            border-bottom: none;
        }

        .item-info {
            flex: 1;
        }

        .item-name {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .item-details {
            font-size: 12px;
            color: var(--text-muted);
        }

        .item-actions {
            display: flex;
            gap: 8px;
        }

        .item-action {
            background: transparent;
            border: none;
            color: var(--text-muted);
            cursor: pointer;
            transition: var(--transition);
        }

        .item-action:hover {
            color: var(--accent);
        }

        .item-action.delete:hover {
            color: var(--error);
        }

        /* Toast Notifications */
        .toast {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: var(--surface);
            color: var(--text);
            padding: 12px 20px;
            border-radius: 8px;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            gap: 12px;
            z-index: 1000;
            transform: translateY(100px);
            opacity: 0;
            transition: var(--transition);
        }

        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }

        .toast.success {
            border-left: 4px solid var(--success);
        }

        .toast.error {
            border-left: 4px solid var(--error);
        }

        .toast.warning {
            border-left: 4px solid var(--warning);
        }

        /* Utility Classes */
        .btn {
            background: var(--accent);
            color: var(--bg);
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn:hover {
            background: var(--accent-dark);
            transform: translateY(-2px);
        }

        .btn-outline {
            background: transparent;
            border: 1px solid var(--accent);
            color: var(--accent);
        }

        .btn-outline:hover {
            background: var(--accent);
            color: var(--bg);
        }

        .text-center {
            text-align: center;
        }

        .mb-4 {
            margin-bottom: 16px;
        }

        .hidden {
            display: none !important;
        }

        /* Responsive Adjustments */
        @media (max-width: 1024px) {
            main {
                grid-template-columns: 1fr;
            }
            
            .hamburger-menu {
                display: flex;
            }
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 16px;
                text-align: center;
            }

            .brand {
                flex-direction: column;
                gap: 12px;
            }

            .dishes-grid {
                grid-template-columns: 1fr;
            }

            .category-section {
                padding: 16px;
            }

            .info-card, .cart-card {
                padding: 16px;
            }

            .admin-panel {
                width: 100%;
                right: -100%;
            }

            .sidebar-nav {
                width: 280px;
            }
        }

        /* Dark mode adjustments */
        @media (prefers-color-scheme: light) {
            :root {
                --bg: #f5f5f5;
                --surface: #ffffff;
                --surface-light: #f9f9f9;
                --text: #333333;
                --text-muted: #666666;
                --border: rgba(0,0,0,0.1);
                --shadow: 0 10px 25px rgba(0,0,0,0.1);
            }
        }
    </style>
</head>
<body>
    <!-- Admin Panel Overlay -->
    <div class="admin-overlay" id="adminOverlay"></div>

    <!-- Admin Panel -->
    <div class="admin-panel" id="adminPanel">
        <div class="admin-header">
            <h3 class="admin-title">Panel de Administración</h3>
            <button class="admin-close" id="adminClose">
                <i class="fas fa-times"></i>
            </button>
        </div>

        <div class="admin-section">
            <h4 class="admin-section-title">Información del Restaurante</h4>
            
            <div class="form-group">
                <label class="form-label">Nombre del Restaurante</label>
                <input type="text" class="form-input" id="restaurantName" value="Patagonia Restaurant">
            </div>

            <div class="form-group">
                <label class="form-label">Eslogan</label>
                <input type="text" class="form-input" id="restaurantSlogan" value="Sabores sin fronteras, experiencia sin límites">
            </div>

            <div class="form-group">
                <label class="form-label">Logo del Restaurante</label>
                <div class="image-upload" id="logoUpload">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <p>Haz clic para subir un logo</p>
                    <input type="file" id="restaurantLogo" accept="image/*" style="display: none;">
                </div>
                <div class="image-preview" id="logoPreview">
                    <img id="previewLogo" src="logo-patagonia.png" alt="Logo del restaurante">
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">Información de Contacto</label>
                <div class="form-group">
                    <label class="form-label">Dirección</label>
                    <input type="text" class="form-input" id="restaurantAddress" value="Domingo F. Sarmiento 494, Las Heras, Santa Cruz">
                </div>
                <div class="form-group">
                    <label class="form-label">Teléfono/WhatsApp</label>
                    <input type="text" class="form-input" id="restaurantPhone" value="2974705984">
                </div>
                <div class="form-group">
                    <label class="form-label">Horario</label>
                    <input type="text" class="form-input" id="restaurantHours" value="18:00 a 00:00">
                </div>
                <div class="form-group">
                    <label class="form-label">Instagram</label>
                    <input type="text" class="form-input" id="restaurantInstagram" value="@patagoniarestaurant">
                </div>
            </div>
        </div>

        <div class="admin-section">
            <h4 class="admin-section-title">Gestión de Platos</h4>
            
            <div class="form-group">
                <label class="form-label">Categoría</label>
                <select class="form-select" id="adminCategory">
                    <option value="">Seleccionar categoría</option>
                </select>
            </div>

            <div class="form-group">
                <label class="form-label">Nombre del Plato</label>
                <input type="text" class="form-input" id="adminDishName" placeholder="Ej: Cordero Patagónico">
            </div>

            <div class="form-group">
                <label class="form-label">Precio</label>
                <input type="number" class="form-input" id="adminDishPrice" placeholder="Ej: 18000">
            </div>

            <div class="form-group">
                <label class="form-label">Descripción</label>
                <textarea class="form-textarea" id="adminDishDesc" placeholder="Descripción del plato..."></textarea>
            </div>

            <div class="form-group">
                <label class="form-label">Etiquetas</label>
                <div class="checkbox-group">
                    <label class="checkbox-label">
                        <input type="checkbox" value="vegetarian"> Vegetariano
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" value="vegan"> Vegano
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" value="spicy"> Picante
                    </label>
                    <label class="checkbox-label">
                        <input type="checkbox" value="gluten-free"> Sin Gluten
                    </label>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label">Imagen del Plato</label>
                <div class="image-upload" id="imageUpload">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <p>Haz clic para subir una imagen</p>
                    <input type="file" id="dishImage" accept="image/*" style="display: none;">
                </div>
                <div class="image-preview" id="imagePreview" style="display: none;">
                    <img id="previewImage" src="" alt="Vista previa">
                </div>
            </div>

            <div class="admin-actions">
                <button class="admin-btn primary" id="saveDish">Guardar Plato</button>
                <button class="admin-btn secondary" id="clearForm">Limpiar</button>
            </div>
        </div>

        <div class="admin-section">
            <h4 class="admin-section-title">Platos Existentes</h4>
            <div class="items-list" id="adminItemsList">
                <!-- Los platos se cargarán aquí dinámicamente -->
            </div>
        </div>

        <div class="admin-section">
            <h4 class="admin-section-title">Generador de QR para Mesas</h4>
            <div class="form-group">
                <label class="form-label">Número de Mesa</label>
                <input type="number" class="form-input" id="tableNumber" placeholder="Ej: 1">
            </div>
            <button class="admin-btn primary" id="generateTableQR">Generar QR</button>
            <div class="qr-preview" id="tableQRPreview" style="margin-top: 16px; display: none;">
                <div class="qr-code" style="width: 200px; height: 200px; margin: 0 auto;">
                    <img id="tableQRImage" src="" alt="QR de la mesa">
                </div>
                <button class="admin-btn secondary" id="downloadQR" style="margin-top: 12px; width: 100%;">
                    <i class="fas fa-download"></i> Descargar QR
                </button>
            </div>
        </div>

        <div class="admin-section">
            <h4 class="admin-section-title">Reportes y Arqueo de Caja</h4>
            <div class="form-group">
                <button class="admin-btn primary" id="viewReports" style="width: 100%;">
                    <i class="fas fa-chart-bar"></i> Ver Reportes de Ventas
                </button>
            </div>
            <div class="form-group">
                <button class="admin-btn secondary" id="viewCashRegister" style="width: 100%;">
                    <i class="fas fa-cash-register"></i> Arqueo de Caja
                </button>
            </div>
        </div>

        <div class="admin-actions">
            <button class="admin-btn danger" id="exportData">Exportar Datos</button>
            <button class="admin-btn secondary" id="importData">Importar Datos</button>
        </div>
    </div>

    <!-- Sidebar Navigation -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>
    <div class="sidebar-nav" id="sidebarNav">
        <div class="sidebar-header">
            <h3 class="sidebar-title">Categorías</h3>
            <button class="close-sidebar" id="closeSidebar">
                <i class="fas fa-times"></i>
            </button>
        </div>
        
        <div class="search-container">
            <div class="search-box">
                <i class="fas fa-search search-icon"></i>
                <input type="text" id="sidebarSearch" placeholder="Buscar platos...">
            </div>
        </div>

        <div class="categories-sidebar" id="categoriesSidebar">
            <!-- Categories will be populated by JavaScript -->
        </div>
    </div>

    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="brand">
                    <div class="hamburger-menu" id="hamburgerMenu">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                    <img src="logo-patagonia.png" alt="Logo Patagonia Restaurant" id="headerLogo">
                    <div class="brand-text">
                        <h1 id="headerTitle">Patagonia Restaurant</h1>
                        <div class="slogan" id="headerSlogan">Sabores sin fronteras, experiencia sin límites</div>
                    </div>
                </div>
                <div class="header-actions">
                    <button class="btn" id="languageToggle">
                        <i class="fas fa-globe"></i> <span id="currentLanguage">ES</span>
                    </button>
                    <!-- Solo mostrar en Netlify -->
                    <button class="btn" id="adminToggle" style="display: none;">
                        <i class="fas fa-cog"></i> Admin
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <main>
            <!-- Menu Section -->
            <section class="menu-section" id="menuSection">
                <!-- Menu content will be populated by JavaScript -->
            </section>

            <!-- Sidebar -->
            <aside class="sidebar">
                <!-- Restaurant Info Card -->
                <div class="info-card">
                    <h3 class="card-title" id="infoTitle">Información</h3>
                    <div class="info-list">
                        <div class="info-item">
                            <div class="info-icon"><i class="fas fa-map-marker-alt"></i></div>
                            <div class="info-text">
                                <strong id="addressLabel">Dirección:</strong> <span id="restaurantAddressText">Domingo F. Sarmiento 494, Las Heras, Santa Cruz</span>
                            </div>
                        </div>
                        <div class="info-item">
                            <div class="info-icon"><i class="fas fa-phone"></i></div>
                            <div class="info-text">
                                <strong id="phoneLabel">Teléfono:</strong> <span id="restaurantPhoneText">2974705984</span>
                            </div>
                        </div>
                        <div class="info-item">
                            <div class="info-icon"><i class="fas fa-clock"></i></div>
                            <div class="info-text">
                                <strong id="hoursLabel">Horario:</strong> <span id="restaurantHoursText">18:00 a 00:00</span>
                            </div>
                        </div>
                        <div class="info-item">
                            <div class="info-icon"><i class="fas fa-hashtag"></i></div>
                            <div class="info-text">
                                <strong id="instagramLabel">Instagram:</strong> <span id="restaurantInstagramText">@patagoniarestaurant</span>
                            </div>
                        </div>
                    </div>
                    <div class="social-links">
                        <a href="#" class="social-link" id="instagramLink"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="social-link" id="facebookLink"><i class="fab fa-facebook-f"></i></a>
                        <a href="https://wa.me/542974705984" class="social-link" id="whatsappLink" target="_blank">
                            <i class="fab fa-whatsapp"></i>
                        </a>
                    </div>
                </div>

                <!-- Cart Card -->
                <div class="cart-card">
                    <div class="cart-header">
                        <h3 class="card-title" id="cartTitle">Tu Pedido</h3>
                        <span class="cart-count" id="cartCount">0 items</span>
                    </div>
                    <div class="cart-items" id="cartItems">
                        <!-- Cart items will be populated by JavaScript -->
                    </div>
                    <div class="cart-footer">
                        <div class="cart-total">
                            <span id="totalLabel">Total:</span>
                            <span id="cartTotal">$0</span>
                        </div>
                        <button class="checkout-btn" id="checkoutBtn" disabled>
                            <i class="fas fa-credit-card"></i> <span id="checkoutText">Proceder al Pago</span>
                        </button>
                    </div>
                </div>
            </aside>
        </main>
    </div>

    <!-- Payment Modal -->
    <div class="modal" id="paymentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="paymentTitle">Método de Pago</h3>
                <button class="close-modal" id="closePayment">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="payment-options">
                <div class="payment-option" data-method="mercado-pago">
                    <div class="payment-icon">
                        <i class="fas fa-credit-card"></i>
                    </div>
                    <div class="payment-info">
                        <h4 id="mercadoPagoTitle">Mercado Pago</h4>
                        <p id="mercadoPagoDesc">Pago con tarjeta, efectivo o transferencia</p>
                    </div>
                </div>
                <div class="payment-option" data-method="transferencia">
                    <div class="payment-icon">
                        <i class="fas fa-university"></i>
                    </div>
                    <div class="payment-info">
                        <h4 id="transferTitle">Transferencia Bancaria</h4>
                        <p id="transferDesc">Transferencia directa a nuestra cuenta</p>
                    </div>
                </div>
                <div class="payment-option" data-method="debito">
                    <div class="payment-icon">
                        <i class="fas fa-credit-card"></i>
                    </div>
                    <div class="payment-info">
                        <h4 id="debitTitle">Tarjeta de Débito</h4>
                        <p id="debitDesc">Pago con tarjeta de débito en el local</p>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label class="form-label" id="tipLabel">Propina</label>
                <div class="tip-options">
                    <div class="tip-option" data-tip="0">
                        <span id="noTip">No dejar propina</span>
                    </div>
                    <div class="tip-option" data-tip="5">
                        <span id="tip5">5%</span>
                    </div>
                    <div class="tip-option" data-tip="10">
                        <span id="tip10">10%</span>
                    </div>
                    <div class="tip-option" data-tip="15">
                        <span id="tip15">15%</span>
                    </div>
                </div>
            </div>

            <div class="receipt" id="paymentReceipt">
                <!-- Receipt will be populated by JavaScript -->
            </div>

            <div class="modal-actions">
                <button class="admin-btn primary" id="confirmPayment" style="flex: 2;">
                    <i class="fas fa-check"></i> <span id="confirmPaymentText">Confirmar Pago</span>
                </button>
                <button class="admin-btn secondary" id="cancelPayment">
                    <span id="cancelPaymentText">Cancelar</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Reports Modal -->
    <div class="modal" id="reportsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Reportes de Ventas</h3>
                <button class="close-modal" id="closeReports">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="reportsContent">
                <!-- Reports content will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <p id="footerText">Patagonia Restaurant — Las Heras, Santa Cruz • Domingo F. Sarmiento 494 • Tel: 2974705984</p>
                <p class="mb-4">© 2025 Patagonia Restaurant. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <script>
        // Menu data structure
        const MENU_DATA = {
            restaurant: 'Patagonia Restaurant',
            slogan: 'Sabores sin fronteras, experiencia sin límites',
            contact: {
                address: 'Domingo F. Sarmiento 494, Las Heras, Santa Cruz',
                phone: '2974705984',
                hours: '18:00 a 00:00',
                instagram: '@patagoniarestaurant'
            },
            categories: [
                { id: 'platos-de-la-casa', title: 'Platos de la Casa', icon: 'fas fa-home' },
                { id: 'postres-de-la-casa', title: 'Postres de la Casa', icon: 'fas fa-ice-cream' },
                { id: 'aperitivos', title: 'Aperitivos', icon: 'fas fa-wine-glass' },
                { id: 'principales', title: 'Platos Principales', icon: 'fas fa-utensils' },
                { id: 'acompanamientos', title: 'Acompañamientos', icon: 'fas fa-carrot' },
                { id: 'postres', title: 'Postres', icon: 'fas fa-birthday-cake' },
                { id: 'bebidas-sin-alcohol', title: 'Bebidas Sin Alcohol', icon: 'fas fa-glass-whiskey' },
                { id: 'te-e-infusiones', title: 'Té e Infusiones', icon: 'fas fa-mug-hot' },
                { id: 'cafe', title: 'Café', icon: 'fas fa-coffee' },
                { id: 'vinos', title: 'Vinos', icon: 'fas fa-wine-bottle' },
                { id: 'tragos', title: 'Tragos', icon: 'fas fa-cocktail' }
            ],
            items: [
                {
                    id: 'cordero1',
                    cat: 'platos-de-la-casa',
                    name: 'Cordero Patagónico al Asador',
                    price: 18000,
                    desc: 'Cordero infusionado con hierbas cocinado lentamente a asador, servido con papas rústicas',
                    img: 'cordero-patagonico-al-asador.jpg',
                    badges: ['spicy'],
                    tags: ['carne', 'patagonico', 'asado']
                },
                {
                    id: 'suspiro1',
                    cat: 'postres-de-la-casa',
                    name: 'Suspiro de Chocolate',
                    price: 9000,
                    desc: 'Pionono de cacao relleno de dulce de leche coronado con helado de cerezas',
                    img: 'suspiro-de-chcocolate.jpg',
                    badges: ['vegetarian'],
                    tags: ['chocolate', 'dulce', 'helado']
                },
            ]
        };

        // Translation data for 6 most spoken languages
        const TRANSLATIONS = {
            es: { // Spanish
                // Header
                slogan: "Sabores sin fronteras, experiencia sin límites",
                
                // Navigation
                searchPlaceholder: "Buscar platos...",
                categoriesTitle: "Categorías",
                
                // Info Card
                infoTitle: "Información",
                addressLabel: "Dirección:",
                phoneLabel: "Teléfono:",
                hoursLabel: "Horario:",
                instagramLabel: "Instagram:",
                
                // Cart
                cartTitle: "Tu Pedido",
                totalLabel: "Total:",
                checkoutText: "Proceder al Pago",
                emptyCart: "Tu carrito está vacío",
                
                // Payment
                paymentTitle: "Método de Pago",
                mercadoPagoTitle: "Mercado Pago",
                mercadoPagoDesc: "Pago con tarjeta, efectivo o transferencia",
                transferTitle: "Transferencia Bancaria",
                transferDesc: "Transferencia directa a nuestra cuenta",
                debitTitle: "Tarjeta de Débito",
                debitDesc: "Pago con tarjeta de débito en el local",
                tipLabel: "Propina",
                noTip: "No dejar propina",
                tip5: "5%",
                tip10: "10%",
                tip15: "15%",
                confirmPaymentText: "Confirmar Pago",
                cancelPaymentText: "Cancelar",
                
                // Footer
                footerText: "Patagonia Restaurant — Las Heras, Santa Cruz • Domingo F. Sarmiento 494 • Tel: 2974705984"
            },
            en: { // English
                slogan: "Flavors without borders, experience without limits",
                searchPlaceholder: "Search dishes...",
                categoriesTitle: "Categories",
                infoTitle: "Information",
                addressLabel: "Address:",
                phoneLabel: "Phone:",
                hoursLabel: "Hours:",
                instagramLabel: "Instagram:",
                cartTitle: "Your Order",
                totalLabel: "Total:",
                checkoutText: "Proceed to Payment",
                emptyCart: "Your cart is empty",
                paymentTitle: "Payment Method",
                mercadoPagoTitle: "Mercado Pago",
                mercadoPagoDesc: "Payment with card, cash or transfer",
                transferTitle: "Bank Transfer",
                transferDesc: "Direct transfer to our account",
                debitTitle: "Debit Card",
                debitDesc: "Payment with debit card at the restaurant",
                tipLabel: "Tip",
                noTip: "No tip",
                tip5: "5%",
                tip10: "10%",
                tip15: "15%",
                confirmPaymentText: "Confirm Payment",
                cancelPaymentText: "Cancel",
                footerText: "Patagonia Restaurant — Las Heras, Santa Cruz • Domingo F. Sarmiento 494 • Phone: 2974705984"
            },
            zh: { // Chinese
                slogan: "无国界风味，无限体验",
                searchPlaceholder: "搜索菜品...",
                categoriesTitle: "类别",
                infoTitle: "信息",
                addressLabel: "地址:",
                phoneLabel: "电话:",
                hoursLabel: "营业时间:",
                instagramLabel: "Instagram:",
                cartTitle: "您的订单",
                totalLabel: "总计:",
                checkoutText: "进行支付",
                emptyCart: "您的购物车是空的",
                paymentTitle: "支付方式",
                mercadoPagoTitle: "Mercado Pago",
                mercadoPagoDesc: "信用卡、现金或转账支付",
                transferTitle: "银行转账",
                transferDesc: "直接转账到我们的账户",
                debitTitle: "借记卡",
                debitDesc: "在餐厅使用借记卡支付",
                tipLabel: "小费",
                noTip: "不给小费",
                tip5: "5%",
                tip10: "10%",
                tip15: "15%",
                confirmPaymentText: "确认支付",
                cancelPaymentText: "取消",
                footerText: "Patagonia Restaurant — Las Heras, Santa Cruz • Domingo F. Sarmiento 494 • 电话: 2974705984"
            },
            hi: { // Hindi
                slogan: "बिना सीमाओं के स्वाद, बिना सीमाओं का अनुभव",
                searchPlaceholder: "व्यंजन खोजें...",
                categoriesTitle: "श्रेणियाँ",
                infoTitle: "जानकारी",
                addressLabel: "पता:",
                phoneLabel: "फोन:",
                hoursLabel: "समय:",
                instagramLabel: "Instagram:",
                cartTitle: "आपका ऑर्डर",
                totalLabel: "कुल:",
                checkoutText: "भुगतान करें",
                emptyCart: "आपकी कार्ट खाली है",
                paymentTitle: "भुगतान विधि",
                mercadoPagoTitle: "Mercado Pago",
                mercadoPagoDesc: "कार्ड, नकद या ट्रांसफर से भुगतान",
                transferTitle: "बैंक ट्रांसफर",
                transferDesc: "हमारे खाते में सीधा ट्रांसफर",
                debitTitle: "डेबिट कार्ड",
                debitDesc: "रेस्तरां में डेबिट कार्ड से भुगतान",
                tipLabel: "टिप",
                noTip: "टिप नहीं",
                tip5: "5%",
                tip10: "10%",
                tip15: "15%",
                confirmPaymentText: "भुगतान पुष्टि करें",
                cancelPaymentText: "रद्द करें",
                footerText: "Patagonia Restaurant — Las Heras, Santa Cruz • Domingo F. Sarmiento 494 • फोन: 2974705984"
            },
            ar: { // Arabic
                slogan: "نكهات بلا حدود، تجربة بلا حدود",
                searchPlaceholder: "ابحث عن الأطباق...",
                categoriesTitle: "الفئات",
                infoTitle: "معلومات",
                addressLabel: "العنوان:",
                phoneLabel: "الهاتف:",
                hoursLabel: "ساعات العمل:",
                instagramLabel: "Instagram:",
                cartTitle: "طلبك",
                totalLabel: "المجموع:",
                checkoutText: "المتابعة إلى الدفع",
                emptyCart: "سلة التسوق فارغة",
                paymentTitle: "طريقة الدفع",
                mercadoPagoTitle: "Mercado Pago",
                mercadoPagoDesc: "الدفع بالبطاقة أو النقد أو التحويل",
                transferTitle: "التحويل البنكي",
                transferDesc: "تحويل مباشر إلى حسابنا",
                debitTitle: "بطاقة الخصم",
                debitDesc: "الدفع ببطاقة الخصم في المطعم",
                tipLabel: "البقشيش",
                noTip: "لا بقشيش",
                tip5: "5%",
                tip10: "10%",
                tip15: "15%",
                confirmPaymentText: "تأكيد الدفع",
                cancelPaymentText: "إلغاء",
                footerText: "Patagonia Restaurant — Las Heras, Santa Cruz • Domingo F. Sarmiento 494 • هاتف: 2974705984"
            },
            pt: { // Portuguese
                slogan: "Sabores sem fronteiras, experiência sem limites",
                searchPlaceholder: "Pesquisar pratos...",
                categoriesTitle: "Categorias",
                infoTitle: "Informação",
                addressLabel: "Endereço:",
                phoneLabel: "Telefone:",
                hoursLabel: "Horário:",
                instagramLabel: "Instagram:",
                cartTitle: "Seu Pedido",
                totalLabel: "Total:",
                checkoutText: "Prosseguir para Pagamento",
                emptyCart: "Seu carrinho está vazio",
                paymentTitle: "Método de Pagamento",
                mercadoPagoTitle: "Mercado Pago",
                mercadoPagoDesc: "Pagamento com cartão, dinheiro ou transferência",
                transferTitle: "Transferência Bancária",
                transferDesc: "Transferência direta para nossa conta",
                debitTitle: "Cartão de Débito",
                debitDesc: "Pagamento com cartão de débito no local",
                tipLabel: "Gorjeta",
                noTip: "Sem gorjeta",
                tip5: "5%",
                tip10: "10%",
                tip15: "15%",
                confirmPaymentText: "Confirmar Pagamento",
                cancelPaymentText: "Cancelar",
                footerText: "Patagonia Restaurant — Las Heras, Santa Cruz • Domingo F. Sarmiento 494 • Tel: 2974705984"
            },
            fr: { // French
                slogan: "Saveurs sans frontières, expérience sans limites",
                searchPlaceholder: "Rechercher des plats...",
                categoriesTitle: "Catégories",
                infoTitle: "Information",
                addressLabel: "Adresse:",
                phoneLabel: "Téléphone:",
                hoursLabel: "Horaires:",
                instagramLabel: "Instagram:",
                cartTitle: "Votre Commande",
                totalLabel: "Total:",
                checkoutText: "Procéder au Paiement",
                emptyCart: "Votre panier est vide",
                paymentTitle: "Méthode de Paiement",
                mercadoPagoTitle: "Mercado Pago",
                mercadoPagoDesc: "Paiement par carte, espèce ou virement",
                transferTitle: "Virement Bancaire",
                transferDesc: "Virement direct sur notre compte",
                debitTitle: "Carte de Débit",
                debitDesc: "Paiement par carte de débit sur place",
                tipLabel: "Pourboire",
                noTip: "Pas de pourboire",
                tip5: "5%",
                tip10: "10%",
                tip15: "15%",
                confirmPaymentText: "Confirmer le Paiement",
                cancelPaymentText: "Annuler",
                footerText: "Patagonia Restaurant — Las Heras, Santa Cruz • Domingo F. Sarmiento 494 • Tél: 2974705984"
            }
        };

        // Application state
        const state = {
            cart: JSON.parse(localStorage.getItem('patagonia_cart')) || [],
            favorites: JSON.parse(localStorage.getItem('patagonia_favorites')) || [],
            filters: {
                category: null,
                diet: [],
                minPrice: null,
                maxPrice: null,
                search: ''
            },
            currentLanguage: 'es',
            isAdmin: false,
            adminData: JSON.parse(localStorage.getItem('patagonia_admin_data')) || MENU_DATA,
            currentEditingItem: null,
            currentTable: null,
            selectedPaymentMethod: null,
            selectedTip: 0,
            orders: JSON.parse(localStorage.getItem('patagonia_orders')) || [],
            cashRegister: JSON.parse(localStorage.getItem('patagonia_cash_register')) || {
                totalSales: 0,
                mercadoPago: 0,
                transferencia: 0,
                debito: 0,
                tips: 0,
                orders: 0
            }
        };

        // DOM Elements
        const elements = {
            // Navigation
            hamburgerMenu: document.getElementById('hamburgerMenu'),
            sidebarNav: document.getElementById('sidebarNav'),
            sidebarOverlay: document.getElementById('sidebarOverlay'),
            closeSidebar: document.getElementById('closeSidebar'),
            categoriesSidebar: document.getElementById('categoriesSidebar'),
            sidebarSearch: document.getElementById('sidebarSearch'),
            
            // Main elements
            menuSection: document.getElementById('menuSection'),
            cartItems: document.getElementById('cartItems'),
            cartCount: document.getElementById('cartCount'),
            cartTotal: document.getElementById('cartTotal'),
            checkoutBtn: document.getElementById('checkoutBtn'),
            languageToggle: document.getElementById('languageToggle'),
            currentLanguage: document.getElementById('currentLanguage'),
            toast: document.getElementById('toast'),
            
            // Admin elements
            adminToggle: document.getElementById('adminToggle'),
            adminPanel: document.getElementById('adminPanel'),
            adminOverlay: document.getElementById('adminOverlay'),
            adminClose: document.getElementById('adminClose'),
            adminCategory: document.getElementById('adminCategory'),
            adminDishName: document.getElementById('adminDishName'),
            adminDishPrice: document.getElementById('adminDishPrice'),
            adminDishDesc: document.getElementById('adminDishDesc'),
            imageUpload: document.getElementById('imageUpload'),
            dishImage: document.getElementById('dishImage'),
            imagePreview: document.getElementById('imagePreview'),
            previewImage: document.getElementById('previewImage'),
            saveDish: document.getElementById('saveDish'),
            clearForm: document.getElementById('clearForm'),
            adminItemsList: document.getElementById('adminItemsList'),
            exportData: document.getElementById('exportData'),
            importData: document.getElementById('importData'),
            
            // Restaurant info elements
            restaurantName: document.getElementById('restaurantName'),
            restaurantSlogan: document.getElementById('restaurantSlogan'),
            restaurantLogo: document.getElementById('restaurantLogo'),
            logoUpload: document.getElementById('logoUpload'),
            logoPreview: document.getElementById('logoPreview'),
            previewLogo: document.getElementById('previewLogo'),
            restaurantAddress: document.getElementById('restaurantAddress'),
            restaurantPhone: document.getElementById('restaurantPhone'),
            restaurantHours: document.getElementById('restaurantHours'),
            restaurantInstagram: document.getElementById('restaurantInstagram'),
            
            // Header elements
            headerLogo: document.getElementById('headerLogo'),
            headerTitle: document.getElementById('headerTitle'),
            headerSlogan: document.getElementById('headerSlogan'),
            
            // Info card elements
            infoTitle: document.getElementById('infoTitle'),
            addressLabel: document.getElementById('addressLabel'),
            restaurantAddressText: document.getElementById('restaurantAddressText'),
            phoneLabel: document.getElementById('phoneLabel'),
            restaurantPhoneText: document.getElementById('restaurantPhoneText'),
            hoursLabel: document.getElementById('hoursLabel'),
            restaurantHoursText: document.getElementById('restaurantHoursText'),
            instagramLabel: document.getElementById('instagramLabel'),
            restaurantInstagramText: document.getElementById('restaurantInstagramText'),
            whatsappLink: document.getElementById('whatsappLink'),
            
            // Cart elements
            cartTitle: document.getElementById('cartTitle'),
            totalLabel: document.getElementById('totalLabel'),
            checkoutText: document.getElementById('checkoutText'),
            
            // Payment elements
            paymentModal: document.getElementById('paymentModal'),
            closePayment: document.getElementById('closePayment'),
            paymentTitle: document.getElementById('paymentTitle'),
            mercadoPagoTitle: document.getElementById('mercadoPagoTitle'),
            mercadoPagoDesc: document.getElementById('mercadoPagoDesc'),
            transferTitle: document.getElementById('transferTitle'),
            transferDesc: document.getElementById('transferDesc'),
            debitTitle: document.getElementById('debitTitle'),
            debitDesc: document.getElementById('debitDesc'),
            tipLabel: document.getElementById('tipLabel'),
            noTip: document.getElementById('noTip'),
            tip5: document.getElementById('tip5'),
            tip10: document.getElementById('tip10'),
            tip15: document.getElementById('tip15'),
            paymentReceipt: document.getElementById('paymentReceipt'),
            confirmPayment: document.getElementById('confirmPayment'),
            cancelPayment: document.getElementById('cancelPayment'),
            confirmPaymentText: document.getElementById('confirmPaymentText'),
            cancelPaymentText: document.getElementById('cancelPaymentText'),
            
            // Footer
            footerText: document.getElementById('footerText'),
            
            // QR elements
            tableNumber: document.getElementById('tableNumber'),
            generateTableQR: document.getElementById('generateTableQR'),
            tableQRPreview: document.getElementById('tableQRPreview'),
            tableQRImage: document.getElementById('tableQRImage'),
            downloadQR: document.getElementById('downloadQR'),
            
            // Reports elements
            viewReports: document.getElementById('viewReports'),
            viewCashRegister: document.getElementById('viewCashRegister'),
            reportsModal: document.getElementById('reportsModal'),
            closeReports: document.getElementById('closeReports'),
            reportsContent: document.getElementById('reportsContent')
        };

        // Initialize the application
        function init() {
            // Check if we're on Netlify (show admin button)
            if (window.location.hostname.includes('netlify') || window.location.hostname === 'localhost') {
                elements.adminToggle.style.display = 'flex';
                state.isAdmin = true;
            }
            
            // Check for table parameter in URL
            const urlParams = new URLSearchParams(window.location.search);
            const tableNumber = urlParams.get('table');
            if (tableNumber) {
                state.currentTable = tableNumber;
                showToast(`Bienvenido mesa ${tableNumber}`, 'success');
            }
            
            // Detect user language based on browser
            detectUserLanguage();
            
            renderCategories();
            renderMenu();
            renderCart();
            setupAdminPanel();
            setupEventListeners();
            updateTranslations();
        }

        // Detect user language
        function detectUserLanguage() {
            const browserLang = navigator.language || navigator.userLanguage;
            const supportedLangs = ['es', 'en', 'zh', 'hi', 'ar', 'pt', 'fr'];
            
            // Extract base language code (e.g., 'en-US' -> 'en')
            const baseLang = browserLang.split('-')[0];
            
            if (supportedLangs.includes(baseLang)) {
                state.currentLanguage = baseLang;
            } else {
                state.currentLanguage = 'es'; // Default to Spanish
            }
            
            elements.currentLanguage.textContent = state.currentLanguage.toUpperCase();
        }

        // Translate text using Google Translate API (simulated)
        function translateText(text, targetLang) {
            // In a real implementation, you would call Google Translate API
            // For this demo, we'll use the predefined translations
            return text; // Simplified for demo purposes
        }

        // Update all translations
        function updateTranslations() {
            const t = TRANSLATIONS[state.currentLanguage];
            
            // Update header
            elements.headerSlogan.textContent = t.slogan;
            
            // Update navigation
            elements.sidebarSearch.placeholder = t.searchPlaceholder;
            elements.sidebarTitle.textContent = t.categoriesTitle;
            
            // Update info card
            elements.infoTitle.textContent = t.infoTitle;
            elements.addressLabel.textContent = t.addressLabel;
            elements.phoneLabel.textContent = t.phoneLabel;
            elements.hoursLabel.textContent = t.hoursLabel;
            elements.instagramLabel.textContent = t.instagramLabel;
            
            // Update cart
            elements.cartTitle.textContent = t.cartTitle;
            elements.totalLabel.textContent = t.totalLabel;
            elements.checkoutText.textContent = t.checkoutText;
            
            // Update payment modal
            elements.paymentTitle.textContent = t.paymentTitle;
            elements.mercadoPagoTitle.textContent = t.mercadoPagoTitle;
            elements.mercadoPagoDesc.textContent = t.mercadoPagoDesc;
            elements.transferTitle.textContent = t.transferTitle;
            elements.transferDesc.textContent = t.transferDesc;
            elements.debitTitle.textContent = t.debitTitle;
            elements.debitDesc.textContent = t.debitDesc;
            elements.tipLabel.textContent = t.tipLabel;
            elements.noTip.textContent = t.noTip;
            elements.tip5.textContent = t.tip5;
            elements.tip10.textContent = t.tip10;
            elements.tip15.textContent = t.tip15;
            elements.confirmPaymentText.textContent = t.confirmPaymentText;
            elements.cancelPaymentText.textContent = t.cancelPaymentText;
            
            // Update footer
            elements.footerText.textContent = t.footerText;
            
            // Update WhatsApp link
            elements.whatsappLink.href = `https://wa.me/54${state.adminData.contact.phone}`;
            
            // Re-render menu with translated content
            renderMenu();
            renderCart();
        }

        // Setup admin panel
        function setupAdminPanel() {
            // Populate restaurant info
            elements.restaurantName.value = state.adminData.restaurant;
            elements.restaurantSlogan.value = state.adminData.slogan;
            elements.restaurantAddress.value = state.adminData.contact.address;
            elements.restaurantPhone.value = state.adminData.contact.phone;
            elements.restaurantHours.value = state.adminData.contact.hours;
            elements.restaurantInstagram.value = state.adminData.contact.instagram;
            
            // Populate category dropdown
            elements.adminCategory.innerHTML = '<option value="">Seleccionar categoría</option>';
            state.adminData.categories.forEach(category => {
                const option = document.createElement('option');
                option.value = category.id;
                option.textContent = category.title;
                elements.adminCategory.appendChild(option);
            });
            
            // Render existing items
            renderAdminItemsList();
        }

        // Render admin items list
        function renderAdminItemsList() {
            elements.adminItemsList.innerHTML = '';
            
            if (state.adminData.items.length === 0) {
                elements.adminItemsList.innerHTML = '<div class="empty-state"><p>No hay platos registrados</p></div>';
                return;
            }
            
            state.adminData.items.forEach(item => {
                const itemRow = document.createElement('div');
                itemRow.className = 'item-row';
                
                const category = state.adminData.categories.find(cat => cat.id === item.cat);
                const categoryName = category ? category.title : 'Sin categoría';
                
                itemRow.innerHTML = `
                    <div class="item-info">
                        <div class="item-name">${item.name}</div>
                        <div class="item-details">${categoryName} - $${item.price.toLocaleString()}</div>
                    </div>
                    <div class="item-actions">
                        <button class="item-action edit" data-id="${item.id}">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="item-action delete" data-id="${item.id}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                
                elements.adminItemsList.appendChild(itemRow);
            });
            
            // Add event listeners to edit and delete buttons
            document.querySelectorAll('.item-action.edit').forEach(button => {
                button.addEventListener('click', (e) => {
                    const itemId = button.getAttribute('data-id');
                    editItem(itemId);
                });
            });
            
            document.querySelectorAll('.item-action.delete').forEach(button => {
                button.addEventListener('click', (e) => {
                    const itemId = button.getAttribute('data-id');
                    deleteItem(itemId);
                });
            });
        }

        // Edit item
        function editItem(itemId) {
            const item = state.adminData.items.find(item => item.id === itemId);
            if (!item) return;
            
            state.currentEditingItem = itemId;
            
            // Fill form with item data
            elements.adminCategory.value = item.cat;
            elements.adminDishName.value = item.name;
            elements.adminDishPrice.value = item.price;
            elements.adminDishDesc.value = item.desc;
            
            // Set badges checkboxes
            document.querySelectorAll('.checkbox-group input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = item.badges && item.badges.includes(checkbox.value);
            });
            
            // Set image preview if exists
            if (item.img) {
                elements.previewImage.src = item.img;
                elements.imagePreview.style.display = 'block';
            }
            
            elements.saveDish.textContent = 'Actualizar Plato';
            showToast('Modo edición activado', 'success');
        }

        // Delete item
        function deleteItem(itemId) {
            if (!confirm('¿Estás seguro de que quieres eliminar este plato?')) return;
            
            state.adminData.items = state.adminData.items.filter(item => item.id !== itemId);
            saveAdminData();
            renderAdminItemsList();
            renderMenu();
            showToast('Plato eliminado correctamente', 'success');
        }

        // Save admin data
        function saveAdminData() {
            localStorage.setItem('patagonia_admin_data', JSON.stringify(state.adminData));
            updateRestaurantInfo();
        }

        // Update restaurant info in the UI
        function updateRestaurantInfo() {
            elements.headerTitle.textContent = state.adminData.restaurant;
            elements.headerSlogan.textContent = state.adminData.slogan;
            elements.restaurantAddressText.textContent = state.adminData.contact.address;
            elements.restaurantPhoneText.textContent = state.adminData.contact.phone;
            elements.restaurantHoursText.textContent = state.adminData.contact.hours;
            elements.restaurantInstagramText.textContent = state.adminData.contact.instagram;
            elements.footerText.textContent = `${state.adminData.restaurant} — Las Heras, Santa Cruz • ${state.adminData.contact.address} • Tel: ${state.adminData.contact.phone}`;
            
            // Update WhatsApp link
            elements.whatsappLink.href = `https://wa.me/54${state.adminData.contact.phone}`;
        }

        // Render categories in sidebar
        function renderCategories() {
            elements.categoriesSidebar.innerHTML = '';
            
            // Add "All" category button
            const allButton = document.createElement('button');
            allButton.className = 'category-sidebar-btn active';
            allButton.innerHTML = '<i class="fas fa-th-large"></i> Todos';
            allButton.addEventListener('click', () => {
                setActiveCategory(null);
                document.querySelectorAll('.category-sidebar-btn').forEach(btn => btn.classList.remove('active'));
                allButton.classList.add('active');
                closeSidebar();
            });
            elements.categoriesSidebar.appendChild(allButton);
            
            // Add category buttons
            state.adminData.categories.forEach(category => {
                const button = document.createElement('button');
                button.className = 'category-sidebar-btn';
                button.innerHTML = `<i class="${category.icon}"></i> ${category.title}`;
                button.addEventListener('click', () => {
                    setActiveCategory(category.id);
                    document.querySelectorAll('.category-sidebar-btn').forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');
                    closeSidebar();
                });
                elements.categoriesSidebar.appendChild(button);
            });
        }

        // Render menu items
        function renderMenu() {
            elements.menuSection.innerHTML = '';
            
            // Filter items based on current filters
            const filteredItems = filterMenuItems();
            
            // Group items by category
            const itemsByCategory = {};
            state.adminData.categories.forEach(category => {
                itemsByCategory[category.id] = filteredItems.filter(item => item.cat === category.id);
            });
            
            // Render each category section
            state.adminData.categories.forEach(category => {
                const categoryItems = itemsByCategory[category.id];
                if (categoryItems.length === 0 && state.filters.category !== category.id) return;
                
                const section = document.createElement('div');
                section.className = 'category-section';
                section.id = category.id;
                
                const header = document.createElement('div');
                header.className = 'category-header';
                header.innerHTML = `
                    <h2 class="category-title">${category.title}</h2>
                    <span class="category-count">${categoryItems.length} items</span>
                `;
                section.appendChild(header);
                
                if (categoryItems.length > 0) {
                    const grid = document.createElement('div');
                    grid.className = 'dishes-grid';
                    
                    categoryItems.forEach(item => {
                        const isFavorite = state.favorites.includes(item.id);
                        const cartItem = state.cart.find(cartItem => cartItem.id === item.id);
                        const quantity = cartItem ? cartItem.quantity : 0;
                        
                        const dishCard = document.createElement('div');
                        dishCard.className = 'dish-card';
                        dishCard.innerHTML = `
                            <div class="dish-image">
                                <img src="${item.img}" alt="${item.name}" loading="lazy">
                                <div class="dish-badges">
                                    ${item.badges ? item.badges.map(badge => 
                                        `<span class="dish-badge ${badge}">${getBadgeText(badge)}</span>`
                                    ).join('') : ''}
                                </div>
                                <button class="favorite-btn ${isFavorite ? 'active' : ''}" data-id="${item.id}">
                                    <i class="fas fa-heart"></i>
                                </button>
                            </div>
                            <div class="dish-content">
                                <div class="dish-header">
                                    <h3 class="dish-name">${item.name}</h3>
                                    <div class="dish-price">$${item.price.toLocaleString()}</div>
                                </div>
                                <p class="dish-description">${item.desc}</p>
                                <div class="dish-actions">
                                    <div class="quantity-controls">
                                        <button class="qty-btn" data-id="${item.id}" data-action="decrease">
                                            <i class="fas fa-minus"></i>
                                        </button>
                                        <span class="qty-display">${quantity}</span>
                                        <button class="qty-btn" data-id="${item.id}" data-action="increase">
                                            <i class="fas fa-plus"></i>
                                        </button>
                                    </div>
                                    <button class="add-to-cart-btn" data-id="${item.id}">
                                        <i class="fas fa-shopping-cart"></i> ${state.currentLanguage === 'es' ? 'Agregar' : 'Add'}
                                    </button>
                                </div>
                            </div>
                        `;
                        grid.appendChild(dishCard);
                    });
                    
                    section.appendChild(grid);
                } else {
                    const emptyState = document.createElement('div');
                    emptyState.className = 'empty-state';
                    emptyState.innerHTML = `
                        <i class="fas fa-search"></i>
                        <p>${state.currentLanguage === 'es' ? 'No se encontraron platos en esta categoría' : 'No dishes found in this category'}</p>
                    `;
                    section.appendChild(emptyState);
                }
                
                elements.menuSection.appendChild(section);
            });
            
            // If no items match filters, show empty state
            if (filteredItems.length === 0) {
                const emptyState = document.createElement('div');
                emptyState.className = 'empty-state';
                emptyState.innerHTML = `
                    <i class="fas fa-search"></i>
                    <p>${state.currentLanguage === 'es' ? 'No se encontraron platos que coincidan con tus criterios de búsqueda' : 'No dishes found matching your search criteria'}</p>
                `;
                elements.menuSection.appendChild(emptyState);
            }
            
            // Add event listeners to the newly created elements
            setupDishEventListeners();
        }

        // Render cart
        function renderCart() {
            elements.cartItems.innerHTML = '';
            
            if (state.cart.length === 0) {
                const emptyText = TRANSLATIONS[state.currentLanguage].emptyCart;
                elements.cartItems.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-shopping-cart"></i>
                        <p>${emptyText}</p>
                    </div>
                `;
                elements.cartCount.textContent = '0 items';
                elements.cartTotal.textContent = '$0';
                elements.checkoutBtn.disabled = true;
                return;
            }
            
            let total = 0;
            let itemCount = 0;
            
            state.cart.forEach(cartItem => {
                const menuItem = state.adminData.items.find(item => item.id === cartItem.id);
                if (!menuItem) return;
                
                const itemTotal = menuItem.price * cartItem.quantity;
                total += itemTotal;
                itemCount += cartItem.quantity;
                
                const cartItemElement = document.createElement('div');
                cartItemElement.className = 'cart-item';
                cartItemElement.innerHTML = `
                    <img src="${menuItem.img}" alt="${menuItem.name}" class="cart-item-image">
                    <div class="cart-item-details">
                        <div class="cart-item-name">${menuItem.name}</div>
                        <div class="cart-item-price">$${menuItem.price.toLocaleString()} x ${cartItem.quantity}</div>
                    </div>
                    <div class="cart-item-actions">
                        <button class="qty-btn" data-id="${menuItem.id}" data-action="decrease">
                            <i class="fas fa-minus"></i>
                        </button>
                        <button class="qty-btn" data-id="${menuItem.id}" data-action="remove">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                elements.cartItems.appendChild(cartItemElement);
            });
            
            elements.cartCount.textContent = `${itemCount} ${itemCount === 1 ? 'item' : 'items'}`;
            elements.cartTotal.textContent = `$${total.toLocaleString()}`;
            elements.checkoutBtn.disabled = false;
        }

        // Filter menu items based on current filters
        function filterMenuItems() {
            return state.adminData.items.filter(item => {
                // Category filter
                if (state.filters.category && item.cat !== state.filters.category) {
                    return false;
                }
                
                // Search filter
                if (state.filters.search) {
                    const searchTerm = state.filters.search.toLowerCase();
                    const itemText = `${item.name} ${item.desc} ${item.tags ? item.tags.join(' ') : ''}`.toLowerCase();
                    if (!itemText.includes(searchTerm)) {
                        return false;
                    }
                }
                
                // Price filter
                if (state.filters.minPrice && item.price < state.filters.minPrice) {
                    return false;
                }
                if (state.filters.maxPrice && item.price > state.filters.maxPrice) {
                    return false;
                }
                
                // Diet filters
                if (state.filters.diet.length > 0) {
                    const hasMatchingDiet = state.filters.diet.some(diet => {
                        return item.badges && item.badges.includes(diet);
                    });
                    if (!hasMatchingDiet) return false;
                }
                
                return true;
            });
        }

        // Set active category
        function setActiveCategory(categoryId) {
            state.filters.category = categoryId;
            renderMenu();
            
            // Scroll to category if it exists
            if (categoryId) {
                const categoryElement = document.getElementById(categoryId);
                if (categoryElement) {
                    categoryElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            } else {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        // Add item to cart
        function addToCart(itemId, quantity = 1) {
            const existingItem = state.cart.find(item => item.id === itemId);
            
            if (existingItem) {
                existingItem.quantity += quantity;
            } else {
                state.cart.push({ id: itemId, quantity });
            }
            
            saveCart();
            renderCart();
            renderMenu(); // Update quantity displays in menu
            showToast(state.currentLanguage === 'es' ? 'Item agregado al carrito' : 'Item added to cart', 'success');
        }

        // Update cart item quantity
        function updateCartItem(itemId, action) {
            const cartItem = state.cart.find(item => item.id === itemId);
            if (!cartItem) return;
            
            if (action === 'increase') {
                cartItem.quantity += 1;
            } else if (action === 'decrease') {
                cartItem.quantity -= 1;
                if (cartItem.quantity <= 0) {
                    state.cart = state.cart.filter(item => item.id !== itemId);
                }
            } else if (action === 'remove') {
                state.cart = state.cart.filter(item => item.id !== itemId);
            }
            
            saveCart();
            renderCart();
            renderMenu(); // Update quantity displays in menu
        }

        // Toggle favorite
        function toggleFavorite(itemId) {
            const index = state.favorites.indexOf(itemId);
            
            if (index === -1) {
                state.favorites.push(itemId);
                showToast(state.currentLanguage === 'es' ? 'Agregado a favoritos' : 'Added to favorites', 'success');
            } else {
                state.favorites.splice(index, 1);
                showToast(state.currentLanguage === 'es' ? 'Eliminado de favoritos' : 'Removed from favorites', 'warning');
            }
            
            localStorage.setItem('patagonia_favorites', JSON.stringify(state.favorites));
            renderMenu(); // Update favorite buttons
        }

        // Save cart to localStorage
        function saveCart() {
            localStorage.setItem('patagonia_cart', JSON.stringify(state.cart));
        }

        // Show toast notification
        function showToast(message, type = 'success') {
            elements.toast.textContent = message;
            elements.toast.className = `toast ${type}`;
            elements.toast.classList.add('show');
            
            setTimeout(() => {
                elements.toast.classList.remove('show');
            }, 3000);
        }

        // Get badge text
        function getBadgeText(badge) {
            const badgeTexts = {
                'vegetarian': state.currentLanguage === 'es' ? 'Veg' : 'Veg',
                'vegan': state.currentLanguage === 'es' ? 'Vegan' : 'Vegan',
                'spicy': state.currentLanguage === 'es' ? 'Picante' : 'Spicy',
                'gluten-free': state.currentLanguage === 'es' ? 'Sin Gluten' : 'Gluten Free'
            };
            
            return badgeTexts[badge] || badge;
        }

        // Open sidebar
        function openSidebar() {
            elements.sidebarNav.classList.add('open');
            elements.sidebarOverlay.classList.add('open');
        }

        // Close sidebar
        function closeSidebar() {
            elements.sidebarNav.classList.remove('open');
            elements.sidebarOverlay.classList.remove('open');
        }

        // Open admin panel
        function openAdminPanel() {
            if (!state.isAdmin) return;
            
            elements.adminPanel.classList.add('open');
            elements.adminOverlay.classList.add('open');
        }

        // Close admin panel
        function closeAdminPanel() {
            elements.adminPanel.classList.remove('open');
            elements.adminOverlay.classList.remove('open');
            clearAdminForm();
        }

        // Clear admin form
        function clearAdminForm() {
            elements.adminCategory.value = '';
            elements.adminDishName.value = '';
            elements.adminDishPrice.value = '';
            elements.adminDishDesc.value = '';
            document.querySelectorAll('.checkbox-group input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = false;
            });
            elements.imagePreview.style.display = 'none';
            elements.previewImage.src = '';
            elements.dishImage.value = '';
            state.currentEditingItem = null;
            elements.saveDish.textContent = 'Guardar Plato';
        }

        // Save dish
        function saveDish() {
            const category = elements.adminCategory.value;
            const name = elements.adminDishName.value.trim();
            const price = parseInt(elements.adminDishPrice.value);
            const desc = elements.adminDishDesc.value.trim();
            
            if (!category || !name || !price || !desc) {
                showToast('Por favor completa todos los campos obligatorios', 'error');
                return;
            }
            
            // Get selected badges
            const badges = [];
            document.querySelectorAll('.checkbox-group input[type="checkbox"]:checked').forEach(checkbox => {
                badges.push(checkbox.value);
            });
            
            // Generate image URL or use placeholder
            let imageUrl = 'placeholder.jpg';
            if (elements.previewImage.src) {
                imageUrl = elements.previewImage.src;
            }
            
            if (state.currentEditingItem) {
                // Update existing item
                const itemIndex = state.adminData.items.findIndex(item => item.id === state.currentEditingItem);
                if (itemIndex !== -1) {
                    state.adminData.items[itemIndex] = {
                        ...state.adminData.items[itemIndex],
                        cat: category,
                        name: name,
                        price: price,
                        desc: desc,
                        badges: badges,
                        img: imageUrl
                    };
                }
                showToast('Plato actualizado correctamente', 'success');
            } else {
                // Create new item
                const newItem = {
                    id: 'item_' + Date.now(),
                    cat: category,
                    name: name,
                    price: price,
                    desc: desc,
                    img: imageUrl,
                    badges: badges,
                    tags: []
                };
                
                state.adminData.items.push(newItem);
                showToast('Plato agregado correctamente', 'success');
            }
            
            saveAdminData();
            renderAdminItemsList();
            renderMenu();
            clearAdminForm();
        }

        // Handle image upload
        function handleImageUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            if (!file.type.startsWith('image/')) {
                showToast('Por favor selecciona un archivo de imagen válido', 'error');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                elements.previewImage.src = e.target.result;
                elements.imagePreview.style.display = 'block';
            };
            reader.readAsDataURL(file);
        }

        // Handle logo upload
        function handleLogoUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            if (!file.type.startsWith('image/')) {
                showToast('Por favor selecciona un archivo de imagen válido', 'error');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                elements.previewLogo.src = e.target.result;
                elements.headerLogo.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        // Export data
        function exportData() {
            const dataStr = JSON.stringify(state.adminData, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = 'patagonia_menu_data.json';
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showToast('Datos exportados correctamente', 'success');
        }

        // Import data
        function importData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = e => {
                const file = e.target.files[0];
                const reader = new FileReader();
                
                reader.onload = function(event) {
                    try {
                        const importedData = JSON.parse(event.target.result);
                        
                        // Validate imported data structure
                        if (importedData.categories && importedData.items) {
                            state.adminData = importedData;
                            saveAdminData();
                            setupAdminPanel();
                            renderCategories();
                            renderMenu();
                            showToast('Datos importados correctamente', 'success');
                        } else {
                            showToast('El archivo no tiene el formato correcto', 'error');
                        }
                    } catch (error) {
                        showToast('Error al importar los datos', 'error');
                        console.error('Import error:', error);
                    }
                };
                
                reader.readAsText(file);
            };
            
            input.click();
        }

        // Generate table QR
        function generateTableQR() {
            const tableNumber = elements.tableNumber.value.trim();
            
            if (!tableNumber) {
                showToast('Por favor ingresa un número de mesa', 'error');
                return;
            }
            
            const url = new URL(window.location.href);
            url.searchParams.set('table', tableNumber);
            
            const qrUrl = `https://chart.googleapis.com/chart?cht=qr&chs=300x300&chl=${encodeURIComponent(url.toString())}`;
            
            elements.tableQRImage.src = qrUrl;
            elements.tableQRPreview.style.display = 'block';
            
            showToast(`QR generado para mesa ${tableNumber}`, 'success');
        }

        // Download QR
        function downloadQR() {
            const link = document.createElement('a');
            link.download = `mesa-${elements.tableNumber.value}-qr.png`;
            link.href = elements.tableQRImage.src;
            link.click();
        }

        // Open payment modal
        function openPaymentModal() {
            if (state.cart.length === 0) return;
            
            // Reset selections
            state.selectedPaymentMethod = null;
            state.selectedTip = 0;
            document.querySelectorAll('.payment-option').forEach(option => {
                option.classList.remove('selected');
            });
            document.querySelectorAll('.tip-option').forEach(option => {
                option.classList.remove('selected');
            });
            document.querySelector('.tip-option[data-tip="0"]').classList.add('selected');
            
            // Create receipt
            updateReceipt();
            elements.paymentModal.classList.add('open');
        }

        // Update receipt with current totals
        function updateReceipt() {
            let receiptHTML = '<h4>Resumen del Pedido</h4>';
            let subtotal = 0;
            
            state.cart.forEach(cartItem => {
                const menuItem = state.adminData.items.find(item => item.id === cartItem.id);
                if (!menuItem) return;
                
                const itemTotal = menuItem.price * cartItem.quantity;
                subtotal += itemTotal;
                
                receiptHTML += `
                    <div class="receipt-item">
                        <span>${menuItem.name} x${cartItem.quantity}</span>
                        <span>$${itemTotal.toLocaleString()}</span>
                    </div>
                `;
            });
            
            const tipAmount = subtotal * (state.selectedTip / 100);
            const total = subtotal + tipAmount;
            
            receiptHTML += `
                <div class="receipt-item">
                    <span>Subtotal</span>
                    <span>$${subtotal.toLocaleString()}</span>
                </div>
                <div class="receipt-item">
                    <span>Propina (${state.selectedTip}%)</span>
                    <span>$${tipAmount.toLocaleString()}</span>
                </div>
                <div class="receipt-total">
                    <span>Total</span>
                    <span>$${total.toLocaleString()}</span>
                </div>
            `;
            
            elements.paymentReceipt.innerHTML = receiptHTML;
        }

        // Close payment modal
        function closePaymentModal() {
            elements.paymentModal.classList.remove('open');
        }

        // Confirm payment
        function confirmPayment() {
            if (!state.selectedPaymentMethod) {
                showToast('Por favor selecciona un método de pago', 'error');
                return;
            }
            
            // Calculate totals
            let subtotal = 0;
            state.cart.forEach(cartItem => {
                const menuItem = state.adminData.items.find(item => item.id === cartItem.id);
                if (menuItem) {
                    subtotal += menuItem.price * cartItem.quantity;
                }
            });
            
            const tipAmount = subtotal * (state.selectedTip / 100);
            const total = subtotal + tipAmount;
            
            // Create order record
            const order = {
                id: 'order_' + Date.now(),
                table: state.currentTable || 'N/A',
                items: [...state.cart],
                subtotal: subtotal,
                tip: tipAmount,
                total: total,
                paymentMethod: state.selectedPaymentMethod,
                timestamp: new Date().toISOString(),
                status: 'completed'
            };
            
            // Add to orders history
            state.orders.push(order);
            localStorage.setItem('patagonia_orders', JSON.stringify(state.orders));
            
            // Update cash register
            state.cashRegister.totalSales += total;
            state.cashRegister[state.selectedPaymentMethod] += total;
            state.cashRegister.tips += tipAmount;
            state.cashRegister.orders += 1;
            localStorage.setItem('patagonia_cash_register', JSON.stringify(state.cashRegister));
            
            // Send notification to admin (simulated)
            sendOrderNotification(order);
            
            // Generate receipt
            generateReceipt(order);
            
            // Clear cart
            state.cart = [];
            saveCart();
            renderCart();
            renderMenu();
            
            closePaymentModal();
            showToast('Pago confirmado. Comprobante generado.', 'success');
        }

        // Send order notification to admin
        function sendOrderNotification(order) {
            // In a real implementation, this would send a WhatsApp message or email
            console.log('Nuevo pedido recibido:', order);
            
            // Simulate WhatsApp message
            const message = `Nuevo pedido #${order.id}
Mesa: ${order.table}
Total: $${order.total.toLocaleString()}
Método: ${order.paymentMethod}
            
¡Revisa el panel de administración para más detalles!`;
            
            // For demo purposes, we'll just show a toast
            showToast(`Pedido #${order.id} enviado al administrador`, 'success');
        }

        // Generate receipt
        function generateReceipt(order) {
            let receiptText = `*PATAGONIA RESTAURANT*\n`;
            receiptText += `*Comprobante de Pago*\n\n`;
            receiptText += `Pedido: #${order.id}\n`;
            receiptText += `Mesa: ${order.table}\n`;
            receiptText += `Fecha: ${new Date().toLocaleString()}\n\n`;
            receiptText += `*ITEMS:*\n`;
            
            order.items.forEach(item => {
                const menuItem = state.adminData.items.find(mi => mi.id === item.id);
                if (menuItem) {
                    receiptText += `• ${menuItem.name} x${item.quantity} - $${(menuItem.price * item.quantity).toLocaleString()}\n`;
                }
            });
            
            receiptText += `\n*RESUMEN:*\n`;
            receiptText += `Subtotal: $${order.subtotal.toLocaleString()}\n`;
            receiptText += `Propina: $${order.tip.toLocaleString()}\n`;
            receiptText += `*TOTAL: $${order.total.toLocaleString()}*\n\n`;
            receiptText += `Método de pago: ${order.paymentMethod}\n\n`;
            receiptText += `¡Gracias por su visita!`;
            
            // Create downloadable receipt
            const receiptBlob = new Blob([receiptText], { type: 'text/plain' });
            const receiptUrl = URL.createObjectURL(receiptBlob);
            
            const link = document.createElement('a');
            link.download = `comprobante-${order.id}.txt`;
            link.href = receiptUrl;
            link.click();
        }

        // View reports
        function viewReports() {
            elements.reportsContent.innerHTML = `
                <h4>Reporte de Ventas</h4>
                <div class="receipt">
                    <div class="receipt-item">
                        <span>Total de Ventas</span>
                        <span>$${state.cashRegister.totalSales.toLocaleString()}</span>
                    </div>
                    <div class="receipt-item">
                        <span>Ventas Mercado Pago</span>
                        <span>$${state.cashRegister.mercadoPago.toLocaleString()}</span>
                    </div>
                    <div class="receipt-item">
                        <span>Ventas Transferencia</span>
                        <span>$${state.cashRegister.transferencia.toLocaleString()}</span>
                    </div>
                    <div class="receipt-item">
                        <span>Ventas Débito</span>
                        <span>$${state.cashRegister.debito.toLocaleString()}</span>
                    </div>
                    <div class="receipt-item">
                        <span>Propinas</span>
                        <span>$${state.cashRegister.tips.toLocaleString()}</span>
                    </div>
                    <div class="receipt-total">
                        <span>Total de Pedidos</span>
                        <span>${state.cashRegister.orders}</span>
                    </div>
                </div>
                
                <h4 style="margin-top: 20px;">Pedidos Recientes</h4>
                <div class="items-list">
                    ${state.orders.slice(-10).reverse().map(order => `
                        <div class="item-row">
                            <div class="item-info">
                                <div class="item-name">Pedido #${order.id}</div>
                                <div class="item-details">Mesa ${order.table} - $${order.total.toLocaleString()} - ${order.paymentMethod}</div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
            
            elements.reportsModal.classList.add('open');
        }

        // Close reports modal
        function closeReportsModal() {
            elements.reportsModal.classList.remove('open');
        }

        // Setup event listeners
        function setupEventListeners() {
            // Hamburger menu
            elements.hamburgerMenu.addEventListener('click', openSidebar);
            elements.closeSidebar.addEventListener('click', closeSidebar);
            elements.sidebarOverlay.addEventListener('click', closeSidebar);
            
            // Search functionality
            elements.sidebarSearch.addEventListener('input', (e) => {
                state.filters.search = e.target.value;
                renderMenu();
            });
            
            // Checkout button
            elements.checkoutBtn.addEventListener('click', openPaymentModal);
            
            // Language toggle
            elements.languageToggle.addEventListener('click', () => {
                const languages = ['es', 'en', 'zh', 'hi', 'ar', 'pt', 'fr'];
                const currentIndex = languages.indexOf(state.currentLanguage);
                state.currentLanguage = languages[(currentIndex + 1) % languages.length];
                elements.currentLanguage.textContent = state.currentLanguage.toUpperCase();
                updateTranslations();
            });
            
            // Admin event listeners
            elements.adminToggle.addEventListener('click', openAdminPanel);
            elements.adminClose.addEventListener('click', closeAdminPanel);
            elements.adminOverlay.addEventListener('click', closeAdminPanel);
            elements.imageUpload.addEventListener('click', () => {
                elements.dishImage.click();
            });
            elements.dishImage.addEventListener('change', handleImageUpload);
            elements.logoUpload.addEventListener('click', () => {
                elements.restaurantLogo.click();
            });
            elements.restaurantLogo.addEventListener('change', handleLogoUpload);
            elements.saveDish.addEventListener('click', saveDish);
            elements.clearForm.addEventListener('click', clearAdminForm);
            elements.exportData.addEventListener('click', exportData);
            elements.importData.addEventListener('click', importData);
            
            // Restaurant info save
            elements.restaurantName.addEventListener('change', () => {
                state.adminData.restaurant = elements.restaurantName.value;
                saveAdminData();
            });
            elements.restaurantSlogan.addEventListener('change', () => {
                state.adminData.slogan = elements.restaurantSlogan.value;
                saveAdminData();
            });
            elements.restaurantAddress.addEventListener('change', () => {
                state.adminData.contact.address = elements.restaurantAddress.value;
                saveAdminData();
            });
            elements.restaurantPhone.addEventListener('change', () => {
                state.adminData.contact.phone = elements.restaurantPhone.value;
                saveAdminData();
            });
            elements.restaurantHours.addEventListener('change', () => {
                state.adminData.contact.hours = elements.restaurantHours.value;
                saveAdminData();
            });
            elements.restaurantInstagram.addEventListener('change', () => {
                state.adminData.contact.instagram = elements.restaurantInstagram.value;
                saveAdminData();
            });
            
            // QR generation
            elements.generateTableQR.addEventListener('click', generateTableQR);
            elements.downloadQR.addEventListener('click', downloadQR);
            
            // Payment modal
            elements.closePayment.addEventListener('click', closePaymentModal);
            elements.cancelPayment.addEventListener('click', closePaymentModal);
            elements.confirmPayment.addEventListener('click', confirmPayment);
            
            // Payment options
            document.querySelectorAll('.payment-option').forEach(option => {
                option.addEventListener('click', () => {
                    document.querySelectorAll('.payment-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    option.classList.add('selected');
                    state.selectedPaymentMethod = option.getAttribute('data-method');
                });
            });
            
            // Tip options
            document.querySelectorAll('.tip-option').forEach(option => {
                option.addEventListener('click', () => {
                    document.querySelectorAll('.tip-option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    option.classList.add('selected');
                    state.selectedTip = parseInt(option.getAttribute('data-tip'));
                    updateReceipt();
                });
            });
            
            // Reports
            elements.viewReports.addEventListener('click', viewReports);
            elements.viewCashRegister.addEventListener('click', viewReports);
            elements.closeReports.addEventListener('click', closeReportsModal);
        }

        // Setup dish event listeners
        function setupDishEventListeners() {
            // Favorite buttons
            document.querySelectorAll('.favorite-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const itemId = button.getAttribute('data-id');
                    toggleFavorite(itemId);
                });
            });
            
            // Quantity controls
            document.querySelectorAll('.qty-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const itemId = button.getAttribute('data-id');
                    const action = button.getAttribute('data-action');
                    updateCartItem(itemId, action);
                });
            });
            
            // Add to cart buttons
            document.querySelectorAll('.add-to-cart-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const itemId = button.getAttribute('data-id');
                    addToCart(itemId, 1);
                });
            });
        }

        // Initialize the application when DOM is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>

</html>
